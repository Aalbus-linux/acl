.\" Access Control Lists manual pages
.\"
.\" (C) 2002 Andreas Gruenbacher, <a.gruenbacher@computer.org>
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.TH ACL_TO_ANY_TEXT 3 "Linux ACL Library" "March 2002" "Access Control Lists"
.SH NAME
acl_to_any_text \- convert an ACL to text
.SH LIBRARY
Linux Access Control Lists library (libacl, \-lacl).
.SH SYNOPSIS
.sp
.nf
.B #include <sys/types.h>
.B #include <sys/acl.h>
.B #include <acl/libacl.h>
.sp
.B "char *acl_to_any_text (acl_t \f2acl\f3, const char *\f2prefix\f3, "
.B "                       char \f2separator\f3, int \f2options\f3);"
.Op
.SH DESCRIPTION
The
.B acl_to_any_text
function translates the ACL pointed to by the argument
.I acl
into a NULL terminated character string. This character string
is composed of the ACL entries contained in
.IR acl ,
in the entry text format described on
.BR acl (5).
Entries are separated from each other by the
.I separator
character.
If the argument
.I prefix
is not NULL,
each entry is prefixed by this character string.
.PP
If the argument
.I options
is 0, ACL entries are converted using the entry tag type keywords
.BR user ,
.BR group ,
.BR mask ,
and
.BR other .
User IDs and group IDs of ACL entries that contain such
qualifiers are converted to their corresponding names; if an identifier
has no corresponding name, a decimal number string is produced. The
ACL text representation contains no additional comments.
.PP
A bitwise combinations of the following
.I options
can be used to modify the result:
.TP
.B TEXT_ABBREVIATE
Instead of the full tag type keywords, single letter abbreviations are used.
The abbreviation for
.B user
is
.BR u ,
the abbreviation for
.B group
is
.BR g ,
the abbreviation for
.B mask
is
.BR m ,
and the abbreviation for
.B other
is
.BR o .
.TP
.B TEXT_NUMERIC_IDS
User IDs and group IDs are included as decimal numbers instead of names.
.TP
.B TEXT_SOME_EFFECTIVE
A comment containing the effective permissions of the ACL entry is
included after ACL entries that contain permissions which are ineffective
because they are masked by an ACL_MASK entry. The ACL entry and the comment
are separated by a tab character.
.TP
.B TEXT_ALL_EFFECTIVE
A comment containing the effective permissions of the ACL entry is
included after all ACL entries that are affected by an ACL_MASK entry.
The comment is included even if the permissions contained in the ACL
entry equal the effective permissions. The ACL entry and the comment are
separated by a tab character.
.TP
.B TEXT_SMART_INDENT
This option is used in combination with the TEXT_SOME_EFFECTIVE or
TEXT_ALL_EFFECTIVE option. The number of tab characters inserted between
the ACL entry and the comment is increased so that the comment is
aligned to at least column 32, if printed starting from column 0. A tab
width of 8 characters is assumed.
.PP
The ACL referred to by
.I acl
is not changed.
.PP
This function allocates any memory necessary to contain the string and
returns a pointer to the string.  The caller should free any releasable
memory, when the new string is no longer required, by calling
.BR acl_free (3)
with the char* returned by
.B acl_to_any_text
as an argument.
.SH RETURN VALUE
Upon successful completion, this function returns a pointer to the text
representation of the ACL.  Otherwise, a value of NULL is returned, and
.B errno
is set to indicate the error.
.SH ERRORS
If any of the following conditions occur, the
.B acl_to_any_text
function returns a value of NULL and sets
.B errno
to the corresponding value:
.TP
.SM
\%[EINVAL]
The argument
.I acl
is not a valid pointer to an ACL.
.TP
.SM
\%[EINVAL]
The ACL referenced by
.I acl
contains one or more improperly formed ACL entries, or for some other
reason cannot be translated into the text form of an ACL.
.TP
.SM
\%[ENOMEM]
The character string to be returned requires more memory than is allowed
by the hardware or system-imposed memory management constraints.
.SH STANDARDS
This is a non-portable, Linux specific extension to the ACL manipulation
functions defined in IEEE Std 1003.1e draft 17 (\(lqPOSIX.1e\(rq, abandoned).
.SH AUTHOR
Written by
.I "Andreas Gruenbacher"
<a.gruenbacher@computer.org>.
.SH SEE ALSO
.BR acl_to_text (3),
.BR acl_free (3),
.BR acl (5)
