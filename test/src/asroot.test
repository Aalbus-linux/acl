!
! Test that can only be run as root as it uses mknod.
!
$mkdir asroot
$ umask 027
$ mknod asroot/null c 1 3
$ mode asroot/null
crw-r-----
$ setfacl -m u:joe:rw,u:lisa:- asroot/null
$ mode asroot/null
crw-rw----+
$ su -c cat\ asroot/null lisa
cat: asroot/null: Permission denied
$ setfacl -m u:lisa:r asroot/null
$ getfacl --omit-header asroot/null
user::rw-
user:lisa:r--
user:joe:rw-
group::r--
mask:rw-
other:---

$ su lisa -c cat\ asroot/null
$ su lisa -c echo\ abc\ >asroot/null
bash: asroot/null: Permission denied
$ rm -f asroot/null
$ mkfifo asroot/fifo
$ mode asroot/fifo
prw-r-----
$ setfacl -m u:joe:- asroot/fifo
$ getfacl --omit-header asroot/fifo
user::rw-
user:joe:---
group::r--
mask:r--
other:---

$ rm asroot/fifo
$ mknod asroot/block b 1 1
$ setfacl -m u:joe:- asroot/block
$ getfacl --omit-header asroot/block
user::rw-
user:joe:---
group::r--
mask:r--
other:---

$ rm asroot/block
$ rmdir asroot
